-- Criando instancias na AWS atraves do Ansible usando o Visual Studio -- 

Pre requisitos:

Visual Studio instalado
WSL Ubuntu instalado 
Usuario da conta aws configurada no terminal usando o AWS CLI

Abaixo siga os passos do video para instalar o aws cli, criar o usuário e logar com o usuário no aws cli.
https://www.youtube.com/watch?v=4irgsIK01rQ

__________________________________________________________________________________________________________
CRIANDO E INSTALANDO AS DEPENDENCIAS 

Apos isso, instale o Ansible e as dependencias necessarias para poder criar as instancias

No terminal linux instale o ansible
    - sudo apt install ansible 

Instale o Python-pip3:
    - sudo apt install python3-pip -y     

Instale algumas dependencias do Python Boto3
    - sudo pip3 install boto boto3

Crie um arquivo de inventario no terminal Linux

    - sudo mkdir /etc/ansible

Edite o arquivo de inventario
    - sudo vi /etc/ansible/hosts

Adicione as duas linhas abaixo no arquivo.
    [localhost]
    local

Crie uma VPC pelo terminal Linux 
(Caso ja tenha uma VPC e Subnet crianda na AWS, pule para "CRIANDO ARQUIVOS PLAYBOOK")

    - aws ec2 create-vpc --cidr-block 10.0.0.0/16

Anote o VpcId retornado (por exemplo, vpc-0abcd1234efgh5678).

Crie a Subnet

    - aws ec2 create-subnet --vpc-id vpc-0abcd1234efgh5678 --cidr-block 10.0.1.0/24 --availability-zone us-east-1a
Anote o SubnetId retornado (por exemplo, subnet-0abcd1234efgh5678).


__________________________________________________________________________________________________________
CRIANDO ARQUIVOS PLAYBOOK

Crei um projeto no VS e crie um arquivo playbook.yml 
 Ex nome do arquivo "create_ec2.yml"

Comando para o arquivo playbook: 

Certifique-se de subtituir as variaveis do comando playbook

Exemplo
"keypair: mykeypair (USE A SUA KEYPAIR)
    instance_type: t2.micro
    instance_name: test-ec2-instance
    image: ami-04b70fa74e45c3917
    region: us-east-1 (VERIQUE A REGIÃO QUE ESTA NA AWS)
    vpc_id: vpc-02d80133cc4d3bbba (Use a id vpc que anotou)
    subnet_id: subnet-036d77f40653377b3 (Use a id subnet que anotou)

Apos criar o arquivo playbook execute o comando no terminal linux 
    - ansible-playbook create_ec2.yml (Ou o ansible-playbook NOME DO SEU ARQUIVO PLAYBOOK .yml)

Verifique se sua instancia foi criada atraves do portal da AWS em EC2. 

Para remover a mesmma instancia EC2, faça o mesmo passo de criar um arquivo playbook 

Comando para o arquivo de excluir a instancia: 

execute o arquivo com o comando 
    - ansible-playbook NOME DO ARQUIVO PARA REMOVER



